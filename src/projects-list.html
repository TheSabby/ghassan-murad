<link rel="import"
      href="../bower_components/polymer/polymer-element.html">
<link rel="import"
      href="../bower_components/iron-flex-layout/iron-flex-layout-classes.html">

<link rel="import"
      href="project-tile.html">

<script src="../projects/projects.js"></script>

<dom-module id="projects-list">
  <template>
    <style include="iron-flex iron-flex-alignment">
      :host {
        display: block;
      }

      .container {
        margin: auto;
      }

      .projects {
        position: relative;
        display: flex;
        flex-direction: column;
        background-color: #000;
        border: solid 5px #000;
        border-top: 0;
      }

      @media only screen and (min-width: 1024px) {
        .projects {
          position: relative;
          display: grid;
          grid-gap: 5px;
          grid-template-columns: 1fr 1fr 1fr 1fr;
          grid-template-rows: 1fr 1fr 1fr 1fr 1fr;
        }
      }
    </style>

    <div class="container vertical layout">
      <div id="projects"
           class="projects"></div>
    </div>
  </template>

  <script>
    class ProjectsList extends Polymer.Element {
      static get is() { return 'projects-list'; }

      static get properties() {
        return {
          inView: {
            type: Boolean,
            observer: 'openedProjects'
          }
        };
      }

      openedProjects() {
        if (this.inView && !this.projects) {
          this.renderProjects();
        }
      }

      renderProjects() {
        projects.forEach(project => {
          let project_tile = new ProjectTile(project);
          this.$.projects.appendChild(project_tile);
        });
      }
    }

    window.customElements.define(ProjectsList.is, ProjectsList);
  </script>
</dom-module>